# Relumeプロジェクト初期セットアップフロー

## 概要
RelumeからダウンロードしたワイヤーフレームHTMLを、デザインブラッシュアップ可能な状態に自動セットアップするフロー。

---

## 全体フロー

### 1. ユーザー手動作業
1. Relumeからプロジェクトzipファイルをダウンロード
2. 任意のディレクトリに解凍（例: `Relume/2025-10-07_satokupo-design/`）

### 2. HTMLファイルのリネーム（rename.py使用）

RelumeからダウンロードしたHTMLファイル名は通常、日本語名やスペース含みの名前（例: `ホーム.html`, `Layout 324.html`）となっています。これを`index.html`にリネームする必要があります。

#### リネーム手順

##### a) 対象ファイルの確認
各ページディレクトリ内のHTMLファイルを確認:
```bash
# 例: 01_ホームディレクトリの場合
ls -1 "s:/MyProjects/KAMUI_CODE/Relume/2025-10-07_satokupo-design/01_ホーム"/*.html
```

##### b) リネーム実行（dry-runで確認後、本実行）
```bash
# dry-runで確認（実際の変更は行わない）
.venv/Scripts/python.exe docs/helper/rename.py \
  --path "s:/MyProjects/KAMUI_CODE/Relume/2025-10-07_satokupo-design/01_ホーム/ホーム.html" \
  --new-name "index.html" \
  --dry-run \
  --verbose

# 本実行
.venv/Scripts/python.exe docs/helper/rename.py \
  --path "s:/MyProjects/KAMUI_CODE/Relume/2025-10-07_satokupo-design/01_ホーム/ホーム.html" \
  --new-name "index.html" \
  --verbose
```

**オプション説明**:
- `--path`: リネーム対象のファイルパス（絶対パス推奨）
- `--new-name`: 新しいファイル名（`index.html`固定）
- `--dry-run`: 実際の変更を行わず、実行内容のみ表示
- `--verbose`: 詳細なログを出力

**注意事項**:
- 既に`index.html`が存在する場合、デフォルトではエラーで中断します
- 複数ページがある場合は、各ページディレクトリごとに実行してください
- `rename.py`は衝突時に自動上書きしないため、安全に実行できます

##### c) 複数ページの一括リネーム（JSON mapping使用）
複数ページを一度に処理する場合:

```bash
# mapping定義（環境変数に格納）
MAP='{"ホーム.html":"index.html","初めての方へ.html":"index.html","サービス紹介.html":"index.html"}'

# 各ページディレクトリで実行（dry-run）
.venv/Scripts/python.exe docs/helper/rename.py \
  --root-dir "s:/MyProjects/KAMUI_CODE/Relume/2025-10-07_satokupo-design/01_ホーム" \
  --mapping "$MAP" \
  --dry-run \
  --verbose

# 本実行
.venv/Scripts/python.exe docs/helper/rename.py \
  --root-dir "s:/MyProjects/KAMUI_CODE/Relume/2025-10-07_satokupo-design/01_ホーム" \
  --mapping "$MAP" \
  --verbose
```

##### 受け入れ条件
- 各ページディレクトリ内のHTMLファイルが`index.html`にリネームされていること
- 既存の`index.html`との衝突がないこと

利用ファイル: `docs/helper/rename.py`

### 3. Pythonスクリプト実行
```bash
.venv/Scripts/python.exe docs/helper/setup_relume_project.py <ページディレクトリパス>
```

例:
```bash
.venv/Scripts/python.exe docs/helper/setup_relume_project.py "s:/MyProjects/KAMUI_CODE/Relume/2025-10-07_satokupo-design/01_ホーム"
```

### 4. スクリプトの自動処理内容

#### 4-1. 各ページのセットアップ
各ページディレクトリに対して以下を実行:

##### a) HTML基本タグの付与
元のコンテンツを特定のHTMLテンプレートでラップ(setup_relume_project.py)

##### b) セクションへのユニークID付与
- 既存コンテンツ内の主要セクション（`<section>`, `<div>`, `<header>`, `<footer>`等）を検出
- ユーザーに各セクションの内容を質問（対話形式）
- ユーザーの回答に基づき、意味のあるIDを付与
  - 例: `section-hero`, `section-features`, `section-contact`

##### c) テンプレート構造のコピー
`docs/helper/setup_templates/`から以下の構造を丸ごとコピー:
```
<ページディレクトリ>/
├── assets/
│   ├── js/
│   │   ├── main.js          # features/自動読込コード付き
│   │   └── features/
│   ├── style/
│   │   └── base.css         # CSSネストルール案内コメント付き
│   │   └── custom.css       # CSSネストルール案内コメント付き
│   └── images/
├── screenshots/
├── temp/
└── docs/
    └── ai-workbench/
```

※ 既存のファイル・ディレクトリは上書きせず保持

##### d) 修正されたHTMLの保存
- 上記すべての修正を適用したindex.htmlを上書き保存

#### 4-2. 実行結果レポート出力
コンソールに以下を表示:
- コピーされたディレクトリ・ファイル一覧
- 各ページで付与されたセクションID一覧

---

## セットアップ後の作業フロー

### 5. デザインブラッシュアップ開始
各ページの`assets/style/custom.css`にスタイルを追加していく。

#### CSS編集ルール
- すべての追加スタイルは`custom.css`にセクション単位で記述
- **必ずネストルールを使用**（入れ子構造）
- 各セクションは最上位のID配下にすべて閉じ込める

例:
```css
/* assets/style/custom.css */
#section-hero {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);

  .hero-title {
    font-size: 3rem;
    font-weight: bold;
  }

  .hero-button {
    background: white;
    color: #667eea;
    padding: 1rem 2rem;
  }
}

#section-features {
  padding: 4rem 0;

  .feature-card {
    border: 1px solid #e5e7eb;
    border-radius: 0.5rem;
    padding: 2rem;
  }
}
```

#### JS編集ルール
- `assets/js/main.js`がエントリーポイント（自動読込方式）
- 機能は`assets/js/features/`に配置するだけで自動認識
- 各機能は`export function init()`を実装
  - 例: `features/carousel.js`, `features/modal.js`
- `main.js`が`import.meta.glob()`で自動読込・実行



**main.jsの実装**:
```javascript
const modules = import.meta.glob('./features/*.js', { eager: true });

document.addEventListener('DOMContentLoaded', () => {
  Object.values(modules).forEach(module => {
    if (module.init && typeof module.init === 'function') {
      module.init();
    }
  });
});
```

**features/の機能モジュール例**:
```javascript
// assets/js/features/carousel.js
export function init() {
  console.log('Carousel initialized');
  // カルーセル機能の実装
}
```

---

## 注意事項

### 冪等性の確保
- スクリプトは複数回実行しても安全
- 既にHTML基本タグが存在する場合はスキップ
- 既存ディレクトリ・ファイルは上書きしない

### 文字コード
- すべてのファイルはUTF-8で処理
- Pythonスクリプトも明示的にUTF-8を指定
- 日本語メッセージも文字化けしないよう処理

### Git管理
- プロジェクトはGit管理されているため、破壊的変更も問題なし

---

## 今後の拡張可能性

- 複数ページ一括処理オプション
- セクションID命名規則のカスタマイズ
- テンプレートのカスタマイズ（meta tag追加等）
- 画像生成AI連携による自動アセット生成
