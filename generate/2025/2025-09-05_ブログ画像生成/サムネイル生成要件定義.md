## サムネイル生成 要件定義（コア）

ウェブ用ブログサムネイルの「共通土台」を定義します。外周の固定余白は設けず、印刷で用いる塗り足し（ブリード）も使用しません。デザイン段階ではテキストは入れず、後段の別ツールでタイトルを合成する前提で、タイトル用の予約領域だけを必ず確保します。細かな演出（フォント選定、色設計、装飾など）は各生成時に上書きしてください。

### 使い方
- 本ファイル内の YAML を既定値として参照してください。
- プロジェクト/シリーズの個別要件は「overrides」で同キーを上書きします。
- 生成スクリプト/ツールは、下記の検証項目（validation）を満たすことを自動チェックしてください。

### なぜ「塗り足し」を使わないのか
- ウェブ表示のサムネイルは断裁工程を前提としないため、塗り足しは不要です。
- そのため外周に固定マージンやブリード領域は設けません（= 0 とします）。

### コア設定（YAML）
```yaml
version: 1.0.0
updated: 2025-09-08
scope: "blog_thumbnail_core"

output:
  format: jpeg            # 一般的なWeb互換・軽量性を重視
  quality: 0.9            # 書き出し品質（0.0-1.0）
  color_space: sRGB
  file_size_limit_mb: 1.5 # 実運用での上限目安
  filename_pattern: "{date}_{slug}_thumb_v{version}.jpg"

canvas:
  orientation: landscape      # 横長
  aspect_ratio: "16:9"        # 主要プラットフォームの汎用比率
  width: 1920                 # マスターサイズ
  height: 1080
  outer_margin_px: 0          # 外周余白は持たせない

reserved_title_area:
  required: true
  preferred_anchor: "center"      # 既定は中央
  allowed_anchors: ["center", "top", "bottom"]
  min_width_pct: 0.6              # キャンバス幅に対する最小割合
  min_height_px: 220
  padding_px: 24                  # 後段合成時の逃げ
  zone_policy:
    texture: "low-frequency-only" # 細かい模様/高周波は避ける
    color_variation_delta_e_max: 6 # 色ムラの上限（概念値）
    avoid_subject_overlap: true   # 被写体や重要要素と競合させない
    keep_overlay: true            # 必要ならわずかな暗部オーバーレイで確保

background:
  style: "solid|two-tone|image"  # グラデーションは既定で不使用
  solid:
    color: "#0F0F0F"
  two_tone:
    colors: ["#0F0F0F", "#1E1E1E"]
    orientation: "horizontal|vertical|diagonal"
    split_ratio: 0.5
  image:
    allow: true
    allow_high_frequency: false     # 細かい模様を抑制
  overlay:
    enabled: true                   # 後段の文字合成を想定したベースコントラスト確保
    color: "#000000"
    opacity: 0.25

brand:
  use_logo: false               # 既定はロゴ非表示（シリーズで上書き）
  placement: "top-right"
  max_width_px: 220
  padding_px: 16

 # デザイン段階ではテキストを描画しないため、タイポグラフィ指定は持たない

contrast:
  min_wcag_ratio: 4.5           # WCAG AA 以上を目標
  check_background_overlay: true

composition:
  focal_zone:
    prefer_centered: true
    allowed_quadrants: ["C"]   # 中央領域を主被写体/文字の基本とする
  subject_placement: "center"
  imagery:
    allowed: ["abstract", "texture", "iconography", "photo-soft"]
    disallowed: ["busy-photo", "tiny-text-in-image"]

prompts:
  base_instructions: |
    Horizontal 16:9. Use a clean solid color, a two-tone solid background, or a simple photo.
    Do not render any text at this stage. Reserve a clear area for later title compositing.
    Keep brand-neutral unless project specifies branding.
  style_guidelines:
    - "Prioritize future text readability; keep reserved area uncluttered."
    - "Avoid high-frequency textures inside the reserved area."
    - "Maintain visual balance with adequate negative space."

 # テキストは後段で合成するため、自動レイアウト関連の指定はなし

export:
  variants:
    - id: web
      width: 1280
      height: 720
      quality: 0.85
    - id: retina
      width: 1920
      height: 1080
      quality: 0.9
  thumbnail_preview:
    width: 640
    height: 360

validation:
  checks:
    - "canvas.aspect_ratio == '16:9'"
    - "canvas.outer_margin_px == 0"
    - "reserved_title_area.required == true"
    - "reserved_title_area.min_width_pct <= measured.zone_width_pct"
    - "reserved_title_area.min_height_px <= measured.zone_height_px"
    - "reserved area is low-frequency and uncluttered"
    - "contrast.min_wcag_ratio >= 4.5"

workflow:
  steps:
    - define_content               # タイトル確定／要約
    - choose_background            # 背景方針の選定と配置
    - reserve_title_area           # タイトル予約領域を確保
    - adjust_overlay_for_contrast  # コントラスト最適化
    - export_variants              # 出力・プレビュー確認
  qa_checklist:
    - "Reserved area meets minimum size"
    - "Reserved area uncluttered and low-frequency"
    - "No critical subject overlaps the reserved area"
    - "Contrast baseline suitable for later text"
    - "File size under limit"

overrides:
  per_series:
    example_series_slug:
      brand.use_logo: true
      background.two_tone.colors: ["#F5F5F5", "#E9E9E9"]
      background.two_tone.orientation: "vertical"
      background.overlay.opacity: 0.2

 # テキストは後段合成のためローカライズ設定は持たない

metadata:
  author: "KAMUI"
  license: "CC BY-NC 4.0"
```

### 補足
- 「横長（16:9）」「タイトル中央配置」「可読性（コントラスト確保）」を不変の原則とします。
- 外周余白と塗り足しは使いません。必要に応じて背景オーバーレイで可読性を確保してください。

